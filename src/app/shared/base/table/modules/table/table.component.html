<ng-container *ngIf="!_options?.tableOptions?.layoutDisable">
  <app-table-layout-one [dt]="table" [options]="_options" [rows]="_rows" [columns]="columns" [layoutType]="layoutType"
    [(selection)]="selection" (layoutCallback)="layoutCallback($event)">
  </app-table-layout-one>
</ng-container>
<p-table #table class="d-flex flex-fill h-100" [style]="_options?.styleOptions?.style" [layoutType]="layoutType"
  [styleClass]="_options?.styleOptions?.styleClass" [tableStyle]="_options?.styleOptions?.tableStyle"
  [tableStyleClass]="_options?.styleOptions?.tableStyleClass" [columns]="columns" [frozenColumns]="frozenColumns"
  [(value)]="_rows" [frozenValue]="frozenRows" [totalRecords]="count" [loading]="loading"
  [responsive]="_options?.tableOptions?.responsive" [responsiveLayout]="_options?.tableOptions?.responsiveLayout"
  [autoLayout]="_options?.tableOptions?.autoLayout" [rowHover]="false" [lazy]="_options?.tableOptions?.lazy"
  [dataKey]="_options?.tableOptions?.dataKey" [(selection)]="selection"
  [selectionMode]="_options?.tableOptions?.selectionMode" [selectAll]="_options?.tableOptions?.selectAll"
  [scrollable]="_options?.tableOptions?.scrollable" [scrollDirection]="_options?.tableOptions?.scrollDirection"
  [rowSelectable]="isRowSelectable"
  [scrollHeight]="_options?.tableOptions.fullPage ? 'flex' : _options?.tableOptions.scrollable ? _options?.tableOptions?.scrollHeight : ''"
  [virtualScroll]="_options?.tableOptions?.virtualScroll" [virtualRowHeight]="_options?.tableOptions?.virtualRowHeight"
  [minBufferPx]="_options?.tableOptions?.minBufferPx" [maxBufferPx]="_options?.tableOptions?.maxBufferPx"
  [frozenWidth]="_options?.widthOptions?.frozenWidth" [sortField]="_options?.tableOptions?.sortField"
  [sortOrder]="_options?.tableOptions?.sortOrder" [sortMode]="_options?.tableOptions?.sortMode"
  [customSort]="_options?.tableOptions?.customSort" [multiSortMeta]="_options?.tableOptions?.multiSortMeta"
  [(first)]="first" [paginator]="_options?.tableOptions?.paginator" [pageLinks]="_options?.tableOptions?.pageLinks"
  [rows]="_options?.tableOptions?.rows" [rowsPerPageOptions]="_options?.tableOptions?.rowsPerPageOptions"
  [showCurrentPageReport]="_options?.tableOptions?.showCurrentPageReport"
  [currentPageReportTemplate]="_options?.tableOptions?.currentPageReportTemplate | translate"
  [resizableColumns]="_options?.tableOptions?.resizableColumns"
  [columnResizeMode]="_options?.tableOptions?.columnResizeMode"
  [reorderableColumns]="_options?.tableOptions?.reorderableColumns" [stateKey]="_options?.tableOptions?.stateKey"
  [stateStorage]="_options?.tableOptions?.stateStorage" [gridTemplate]="gridTemplate"
  [loadOnInit]="_options?.tableOptions?.loadOnInit"
  (onLazyLoad)="tableComponentCallback({ action: tableEventEnum.LAZY, data: $event })"
  (onRowSelect)="tableComponentCallback({ action: tableEventEnum.SELECT, data: $event })">

  <!-- begin: header section -->
  <ng-template pTemplate="header" let-columns>
    <!-- begin: header section -->
    <tr *ngIf="headerTemplate" class="bg-light">
      <ng-container *ngTemplateOutlet="headerTemplate; context: { columns: columns, rows: rows, options: options}">
      </ng-container>
    </tr>
    <tr *ngIf="!headerTemplate" appTableHeader [columns]="columns" [table]="table" [frozenColumns]="frozenColumns"
      [options]="_options" (tableComponentCallback)="tableComponentCallback($event)" class="bg-light"> </tr>
    <!-- end: header section -->
  </ng-template>
  <!-- end: header section -->

  <!-- begin: body section -->
  <ng-template pTemplate="body" let-rowData let-expanded="expanded" let-columns="columns" let-rowIndex="rowIndex">
    <tr class="p-selectable-row" [expanded]="expanded" [rowData]="rowData" [rowIndex]="rowIndex"
      [pReorderableRow]="rowIndex" pReorderableRowDisabled="false" appTableBody [columns]="columns"
      [frozenColumns]="frozenColumns" [options]="_options" (tableComponentCallback)="tableComponentCallback($event)"
      [bodyTemplate]="bodyTemplate" [itemTemplate]="itemTemplate">
    </tr>
  </ng-template>
  <!-- end: body section -->

  <ng-template pTemplate="emptymessage">
    <ng-container *ngIf="emptyTemplate && !loading">
      <tr *ngIf="emptyTemplate && !loading">
        <td class="w-100 bg-white border-0 pt-20" [attr.colspan]="getColumnSpan()">
          <ng-container *ngTemplateOutlet="emptyTemplate; context: { }">
          </ng-container>
        </td>
      </tr>
    </ng-container>
    <tr *ngIf="!emptyTemplate && !loading">
      <td class="w-100 bg-white pt-20" [attr.colspan]="getColumnSpan()">
        <div class="py-20">
          <img [defaultImage]="defaultImage" [lazyLoad]="'./assets/media/common/no-data-found.svg'" alt=""
            class="max-w-100 max-h-200px d-block mx-auto">
          <div class="text-center mt-5">
            <h3>No Data Found</h3>
          </div>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<app-drawer *ngIf="columnSetting.action" [drawerTitle]="'Reorder & Toggle Columns'"
  [show]="columnSetting.open && columnSetting.action === 'REORDER'" (closeEvent)="closeDrawer()">
  <app-table-toogle class="d-flex flex-column flex-fill overflow-y-auto" [columns]="columnSetting.columns"
    (saveEvent)="columnSettingEvent($event)" (closeEvent)="closeDrawer()"></app-table-toogle>
</app-drawer>